{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrahead %}
{{ block.super }}
<style>
    .dashboard-link {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px 24px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        display: inline-block;
        margin-bottom: 20px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .dashboard-link:hover {
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    }
    
    .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
    }
    
    .stat-item {
        text-align: center;
        padding: 10px;
        background: white;
        border-radius: 6px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .stat-number {
        font-size: 1.8em;
        font-weight: bold;
        color: #007cba;
        margin-bottom: 5px;
    }
    
    .stat-label {
        font-size: 0.8em;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
</style>
{% endblock %}

{% block content_title %}
    <h1>ðŸ“… Meeting Management</h1>
    
    <!-- Dashboard Link -->
    <div style="margin-bottom: 20px;">
        <a href="/meeting-service/admin/dashboard/" class="dashboard-link">
            ðŸ“Š Open Meeting Analytics Dashboard
        </a>
    </div>
    
    <!-- Quick Stats -->
    <div class="dashboard-stats" id="quick-stats">
        <div class="stat-item">
            <div class="stat-number" id="total-meetings">-</div>
            <div class="stat-label">Total Meetings</div>
        </div>
        <div class="stat-item">
            <div class="stat-number" id="upcoming-meetings">-</div>
            <div class="stat-label">Upcoming</div>
        </div>
        <div class="stat-item">
            <div class="stat-number" id="completed-meetings">-</div>
            <div class="stat-label">Completed</div>
        </div>
        <div class="stat-item">
            <div class="stat-number" id="conversion-rate">-</div>
            <div class="stat-label">Conversion Rate</div>
        </div>
    </div>
{% endblock %}

{% block content %}
{{ block.super }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    loadQuickStats();
});

async function loadQuickStats() {
    try {
        const response = await fetch('/meeting-service/admin/dashboard/metrics/');
        const data = await response.json();
        
        document.getElementById('total-meetings').textContent = data.total_meetings || '0';
        document.getElementById('upcoming-meetings').textContent = data.upcoming_meetings || '0';
        document.getElementById('completed-meetings').textContent = (data.total_meetings - data.upcoming_meetings) || '0';
        document.getElementById('conversion-rate').textContent = (data.conversion_rate || 0) + '%';
    } catch (error) {
        console.error('Error loading quick stats:', error);
        // Hide stats on error
        document.getElementById('quick-stats').style.display = 'none';
    }
}
</script>
{% endblock %}